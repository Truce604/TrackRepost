<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Repost Campaign</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="firebaseConfig.js"></script>
    <script src="repost.js" defer></script>
</head>
<body>
    <header>
        <h1>ðŸŽµ Repost Campaign</h1>
        <p>Boost your music reach by engaging with this track.</p>
    </header>

    <div class="container">
        <h2>ðŸ”Š Track Details</h2>
        <div id="trackContainer">
            <p>Loading track...</p>
        </div>

        <button id="repostBtn">Repost & Earn</button>
    </div>

    <script>
        // âœ… Extract URL Parameters
        function getUrlParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                id: params.get("id"),
                track: params.get("track"),
                owner: params.get("owner"),
                credits: params.get("credits")
            };
        }

        // âœ… Load Track Info
        document.addEventListener("DOMContentLoaded", function () {
            const { track, credits } = getUrlParams();
            const trackContainer = document.getElementById("trackContainer");

            if (track) {
                trackContainer.innerHTML = `
                    <iframe width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay"
                        src="https://w.soundcloud.com/player/?url=${encodeURIComponent(track)}">
                    </iframe>
                    <p><strong>Credits Earned:</strong> ${credits}</p>
                `;
            } else {
                trackContainer.innerHTML = "<p>Error: No track found.</p>";
            }
        });

        // âœ… Handle Repost Button Click
        document.getElementById("repostBtn").addEventListener("click", function () {
            alert("ðŸš¨ You must be signed into SoundCloud to repost this track.");
            window.location.href = "https://soundcloud.com/connect"; // SoundCloud login page
        });
    </script>
</body>
</html>



